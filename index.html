<!DOCTYPE html>
<html lang="ckb" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maten TV Pro</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="app-header">
        <div class="logo">
            <i class="fas fa-tv"></i>
            <span>Maten TV</span>
        </div>

        <div class="header-search">
            <input type="text" id="searchInput" placeholder="گەڕان بۆ کەناڵ..." oninput="window.handleSearch()">
            <i class="fas fa-search"></i>
        </div>

        <div class="header-actions">
            <button id="favFilterBtn" class="icon-btn" onclick="window.toggleFavFilterView()">
                <i class="fas fa-heart"></i>
            </button>
            
            <button id="adminLoginBtn" class="icon-btn">
                <i class="fas fa-user-cog"></i>
            </button>
            
            <button id="logoutBtn" class="icon-btn" style="display: none;">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </header>

    <div id="mainContainer">
        </div>

    <button id="addChannelBtn" class="add-fab">
        <i class="fas fa-plus"></i>
    </button>
    
    <button id="factoryResetBtn" style="display:none; position:fixed; bottom:100px; right:30px; background:red; color:white; padding:5px 10px; border-radius:5px; border:none;" onclick="if(confirm('دڵنیای؟')){ localStorage.clear(); location.reload(); }">
        Reset
    </button>

    <div id="playerModal" class="modal" style="z-index: 9999;">
        <div class="video-modal-content" id="videoContainer">
            <div class="player-btn close-video" onclick="window.closePlayer()">
                <i class="fas fa-times"></i>
            </div>
            <div class="player-btn maximize-btn" onclick="window.toggleFullScreen()">
                <i class="fas fa-expand"></i>
            </div>
            
            <video id="videoPlayer" playsinline onclick="window.triggerOverlay()"></video>
            
            <div class="related-channels-bar" id="relatedChannels">
                </div>
        </div>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px; text-align: center;">چوونەژووری ئەدمین</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label>ناوی بەکارهێنەر</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label>وشەی نهێنی</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit">چوونەژوورەوە</button>
                <button type="button" class="close-modal-btn close-modal">داخستن</button>
            </form>
        </div>
    </div>

    <div id="channelFormModal" class="modal">
        <div class="modal-content">
            <h3 id="formTitle" style="margin-bottom: 20px; text-align: center;">زیادکردنی کەناڵ</h3>
            <form id="channelForm">
                <div class="form-group">
                    <label>ناوی کەناڵ</label>
                    <input type="text" id="channelName" required>
                </div>
                <div class="form-group">
                    <label>لینکی پەخش (M3U8)</label>
                    <input type="url" id="channelUrl" required>
                </div>
                <div class="form-group">
                    <label>بەش (Category)</label>
                    <select id="channelCategory">
                        <option value="general">📺 هەمەجۆر</option>
                        <option value="sport">⚽ وەرزش</option>
                        <option value="news">📰 هەواڵ</option>
                        <option value="movies">🎬 فیلم</option>
                        <option value="kids">🧸 منداڵان</option>
                        <option value="islamic">🕌 ئاینی</option>
                        <option value="kurdistan">☀️ کوردستان</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>لۆگۆی کەناڵ (لینک)</label>
                    <input type="url" id="channelImageLink" placeholder="https://...">
                </div>
                <div style="text-align: center; margin: 10px 0;">یان</div>
                <div class="form-group">
                    <label>لۆگۆی کەناڵ (فایل)</label>
                    <input type="file" id="channelImageFile" accept="image/*">
                </div>

                <button type="submit">پاشەکەوتکردن</button>
                <button type="button" class="close-modal-btn close-modal">داخستن</button>
            </form>
        </div>
    </div>

    <script src="script.js" type="module"></script>

</body>
</html>
